<!DOCTYPE html><html><head> <script type="text/javascript" src="//www.gstatic.com/cast/sdk/libs/caf_receiver/v3/cast_receiver_framework.js"></script> <style>@font-face{font-family:'Product Sans';font-style:normal;src:local('Open Sans'), local('OpenSans'), url(https://fonts.gstatic.com/s/productsans/v5/HYvgU2fE2nRJvZ5JFAumwegdm0LZdjqr5-oayXSOefg.woff2) format('woff2')}body{overflow:hidden;margin:0px;padding:0px}video{height:100%;width:100%;color:#FFF;z-index:1;position:absolute;background-color:rgb(12, 12, 12);filter:blur(7px);-webkit-filter:blur(7px);background-repeat:no-repeat;background-size:cover}#messages span{font-weight:normal}img{position:relative;z-index:1;padding:50px;box-sizing:border-box;resize:horizontal;overflow:auto;max-width:100%;height:calc(100vh - 140px);margin-top:2%;margin-left:3%}#splash{position:absolute;font-family:Product Sans;font:bold;font-size:100px;z-index:1;top:40%;left:33%;color:white}#totaltime{font-size:20px;font-family:Product Sans;color:white;float:left;margin-left:90%;margin-top:0%;z-index:2;position:absolute;font-weight:bold;width:5%;height:3%;border:0px solid blue;text-align:right}#currenttime{font-size:20px;font-family:Product Sans;color:white;float:left;margin-left:7.3%;margin-top:0%;z-index:2;position:absolute;font-weight:bold;width:5%;height:3%;border:0px solid blue}#tracktitle{font-size:65px;font-family:Product Sans;color:white;margin-left:48%;margin-top:-36.3%;z-index:1;position:absolute;width:39%;border:0px solid blue;font-weight:800;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}#trackartist{font-size:40px;font-family:Product Sans;color:white;float:left;margin-left:48%;margin-top:-24.3%;z-index:2;position:absolute;font-weight:bold;width:39%;height:6.5%;border:0px solid blue;font-weight:200;overflow:hidden;text-overflow:ellipsis}#trackalbum{font-size:40px;font-family:Product Sans;color:white;float:left;margin-left:48%;margin-top:-20.55%;z-index:2;position:absolute;font-weight:bold;width:39%;height:6.5%;border:0px solid blue;font-weight:200;overflow:hidden;text-overflow:ellipsis}#tracksamplerate{font-size:20px;font-family:Product Sans;color:white;float:left;margin-left:48%;margin-top:-10.3%;z-index:2;position:absolute;width:39%;height:3.5%;border:0px solid blue;font-weight:10}#trackposition{font-size:20px;font-family:Product Sans;color:white;float:left;margin-left:48%;margin-top:-8.3%;z-index:2;position:absolute;width:39%;height:3.5%;border:0px solid blue}#nexttrack{font-size:20px;font-family:Product Sans;color:white;float:left;margin-left:48%;margin-top:-6.3%;z-index:2;position:absolute;width:39%;height:3.5%;border:0px solid blue}</style>></head><body><video id="receiverVideoElement"></video><div class="container"><div id="splash" class="text">Musicbee</div></div><div> <img id="albumartimage" /></div><div><span id="tracktitle"></span></div><div><span id="trackartist"></span></div><div><span id="trackalbum"></span></div><div><span id="tracksamplerate"></span></div><div><span id="trackposition"></span></div><div><span id="totaltime"></span></div><div><span id="currenttime"></span></div><div><span id="nexttrack"></span></div> <script>function updateUI(elementId,message){document.getElementById(elementId).innerHTML=message;} function updateImage(message){var url=message+"?"+new Date().getTime();document.getElementById("albumartimage").src=url;document.getElementById('receiverVideoElement').style.backgroundImage='linear-gradient( rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5) ),url("'+url+'")';} function fmtMSS(s){return(s-(s%=60))/60+(9<s?':':':0')+s} const context=cast.framework.CastReceiverContext.getInstance();const playerManager=context.getPlayerManager();playerManager.setSupportedMediaCommands(cast.framework.messages.Command.ALL_BASIC_MEDIA|cast.framework.messages.Command.PAUSE|cast.framework.messages.Command.QUEUE_NEXT|cast.framework.messages.Command.QUEUE_PREV);const playerData={};const playerDataBinder=new cast.framework.ui.PlayerDataBinder(playerData);context.addEventListener(cast.framework.system.EventType.READY,()=>{const deviceCapabilities=context.getDeviceCapabilities();if(deviceCapabilities&&deviceCapabilities[cast.framework.system.DeviceCapabilities.DISPLAY_SUPPORTED]){console.log("Display supported");playerDataBinder.addEventListener(cast.framework.ui.PlayerDataEventType.CURRENT_TIME_CHANGED,e=>{var currentTime=e.value;var s=parseInt(currentTime%60);var m=parseInt((currentTime/60)%60);if(s<10){document.getElementById("currenttime").innerHTML=m+':0'+s;} else{document.getElementById("currenttime").innerHTML=m+':'+s;}});playerManager.setMessageInterceptor(cast.framework.messages.MessageType.LOAD,request=>{console.log(request);document.getElementById("splash").style.visibility="hidden";updateUI('tracktitle',request.media.metadata.title);updateUI('trackalbum',request.media.metadata.albumName);updateUI('trackartist',request.media.metadata.artist);updateUI('totaltime',fmtMSS(request.media.duration));updateUI('tracksamplerate',request.media.customData[0].Value);updateUI('trackposition',"Now Playing: "+request.media.customData[1].Value);updateUI('nexttrack',"Next Up: "+request.media.customData[2].Value);updateImage(request.media.metadata.images[0]['url']);if(request.media.entity&&!request.media.contentId){return getMediaByEntity(request.media.entity).then(media=>{request.media.contentId=media.url;return request;});} return request;});}else{console.log("Display not supported");}});const CHANNEL='urn:x-cast:com.google.cast.media';const ctx=cast.framework.CastReceiverContext.getInstance();const options=new cast.framework.CastReceiverOptions();options.customNamespaces=Object.assign({});options.customNamespaces[CHANNEL]=cast.framework.system.MessageType.JSON;playerManager.addEventListener(cast.framework.events.EventType.REQUEST_QUEUE_UPDATE,(event)=>{console.log(event.requestData.jump);if(event.requestData.jump==1){console.log("NEXT");const objToSender={type:'NEXT',message:'NEXT'};context.sendCustomMessage(CHANNEL,undefined,objToSender);}else{console.log("PREVIOUS");const objToSender={type:'PREVIOUS',message:'PREVIOUS'};context.sendCustomMessage(CHANNEL,undefined,objToSender);}});context.addEventListener(cast.framework.system.EventType.SENDER_DISCONNECTED,function(event){console.log("Disconnected");context.stop();});context.start(options);</script> </body></html>